{"version":3,"sources":["websocket_game_server_cli.js"],"names":["argv","slice","buzzer","preferences","game","port","questions_directory","getUserHome","master","type","console","log","stdin","resume","on","code","exit","leave","err","dir","depth","env","platform"],"mappings":"AAAA;;AAEA;;AAEA;;;;AACA;;;;;;AAEA;AACA;AACA;AACA;AACA,IAAIA,OAAO,wBAAS,kBAAQA,IAAR,CAAaC,KAAb,CAAmB,CAAnB,CAAT,CAAX;AACAD,KAAKE,MAAL,GAAcF,KAAKE,MAAL,IAAe,KAA7B;;AAEA,IAAIC,cAAc;AACjBC,OAAM;AACLC,QAAM,IADD;AAELC,uBAAqBC,gBAAc;AAF9B,EADW;AAKjBC,SAAQ;AACPC,QAAM,WADC;AAEPJ,QAAM;AAFC,EALS;AASjBH,SAAQ;AACPO,QAAMT,KAAKE;AADJ;AATS,CAAlB;;AAcAQ,QAAQC,GAAR,CAAY,WAAZ;AACA,IAAIP,OAAO,kCAAMD,WAAN,EAAmB,OAAnB,CAAX;;AAEA,kBAAQS,KAAR,CAAcC,MAAd;AACA,kBAAQC,EAAR,CAAW,MAAX,EAAmB,UAACC,IAAD,EAAU;AAC5B,mBAAQC,IAAR,CAAaD,IAAb;AACAL,SAAQC,GAAR,CAAY,cAAZ;AACA,CAHD;AAIA,kBAAQG,EAAR,CAAW,QAAX,EAAqB,YAAM;AAC1BJ,SAAQC,GAAR,CAAY,aAAZ;AACAP,MAAKF,MAAL,CAAYe,KAAZ;AACA,mBAAQD,IAAR,CAAa,CAAb;AACA,CAJD;AAKA,kBAAQF,EAAR,CAAW,mBAAX,EAAgC,UAACI,GAAD,EAAS;AACxCR,SAAQS,GAAR,CAAYD,GAAZ,EAAiB,EAAEE,OAAO,IAAT,EAAjB;AACA,mBAAQJ,IAAR,CAAa,CAAb;AACA,CAHD;;AAKA,SAAST,WAAT,GAAuB;AACrB,QAAO,kBAAQc,GAAR,CAAa,kBAAQC,QAAR,IAAoB,OAArB,GAAgC,aAAhC,GAAgD,MAA5D,CAAP;AACD","file":"websocket_game_server_cli.js","sourcesContent":["'use strict';\n\nimportÂ { start } from './websocket_game_server'\n\nimport process from 'process';\nimport minimist from 'minimist';\n\n//\n// Possible arguments :\n// \t- buzzer : \"web\" or \"ps2\"\n//\nvar argv = minimist(process.argv.slice(2))\nargv.buzzer = argv.buzzer || 'ps2'\n\nvar preferences = {\n\tgame: {\n\t\tport: 8081,\n\t\tquestions_directory: getUserHome()+'/quizzy/questions'\n\t},\n\tmaster: {\n\t\ttype: 'websocket',\n\t\tport: 8082\n\t},\n\tbuzzer: {\n\t\ttype: argv.buzzer\n\t}\n}\n\nconsole.log('start cli')\nlet game = start(preferences, 'start')\n\nprocess.stdin.resume();\nprocess.on('exit', (code) => {\n\tprocess.exit(code);\n\tconsole.log('process exit');\n});\nprocess.on('SIGINT', () => {\n\tconsole.log('\\nCTRL+C...');\n\tgame.buzzer.leave();\n\tprocess.exit(0);\n});\nprocess.on('uncaughtException', (err) => {\n\tconsole.dir(err, { depth: null });\n\tprocess.exit(1);\n});\n\nfunction getUserHome() {\n  return process.env[(process.platform == 'win32') ? 'USERPROFILE' : 'HOME'];\n}"]}