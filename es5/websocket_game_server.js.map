{"version":3,"sources":["websocket_game_server.js"],"names":["start","preferences","startOrContinue","buzzer","type","get_teensy_buzzer","get_ps2_buzzer","get_websocket_buzzer","console","log","gameUI","game","port","masterUI","master","questions_directory","HID","require","device","e","Error","message","prefs"],"mappings":"AAAA;;;;;QASgBA,K,GAAAA,K;;AAPhB;;AACA;;AAEA;;AACA;;AACA;;AAEO,SAASA,KAAT,CAAeC,WAAf,EAA4BC,eAA5B,EAA6C;AACnD,KAAIC,MAAJ;AACA,SAAOF,YAAYE,MAAZ,CAAmBC,IAA1B;AACC,OAAK,QAAL;AACCD,YAASE,mBAAT;AACA;AACD,OAAK,KAAL;AACCF,YAASG,gBAAT;AACA;AACD,OAAK,WAAL;AACCH,YAASI,qBAAqBN,YAAYE,MAAjC,CAAT;AACA;AACD;AACCK,WAAQC,GAAR,CAAY,OAAZ;AAXF;;AAcA,KAAIC,SAAS,8BAAgBT,YAAYU,IAAZ,CAAiBC,IAAjC,CAAb;AACA,KAAIC,WAAW,8BAAgBZ,YAAYa,MAAZ,CAAmBF,IAAnC,CAAf;AACA,KAAID,OAAO,eAASR,MAAT,EAAiBO,MAAjB,EAAyBG,QAAzB,EAAmCZ,YAAYU,IAAZ,CAAiBI,mBAApD,EAAyEb,eAAzE,CAAX;AACA,QAAOS,IAAP;AACA;;AAED,SAASL,cAAT,GAA0B;AACzB,KAAIH,SAAS,IAAb;AACA,KAAI;AACH,MAAIa,MAAMC,QAAQ,UAAR,CAAV;AACA,MAAIC,SAAS,IAAIF,IAAIA,GAAR,CAAY,MAAZ,EAAoB,MAApB,CAAb;AACAb,WAAS,kBAAce,MAAd,CAAT;AACA,EAJD,CAIE,OAAMC,CAAN,EAAS;AACV,QAAM,IAAIC,KAAJ,CAAU,uBAAqBD,EAAEE,OAAjC,CAAN;AACA;AACD,QAAOlB,MAAP;AACA;;AAED,SAASE,iBAAT,GAA6B;AAC5B,QAAO,0BAAP;AACA;;AAED,SAASE,oBAAT,CAA8Be,KAA9B,EAAqC;AACpC,QAAO,+BAAoBA,MAAMV,IAA1B,CAAP;AACA","file":"websocket_game_server.js","sourcesContent":["'use strict';\n\nimport { WebsocketUI } from './websocket_ui'\nimport { Game } from './game'\n\nimport { TeensyBuzzer } from 'node-buzzer/es5/teensy'\nimport { Ps2Buzzer } from 'node-buzzer/es5/ps2'\nimport { WebsocketBuzzer } from 'node-buzzer/es5/websocket'\n\nexport function start(preferences, startOrContinue) {\n\tvar buzzer;\n\tswitch(preferences.buzzer.type) {\n\t\tcase 'teensy':\n\t\t\tbuzzer = get_teensy_buzzer();\n\t\t\tbreak;\n\t\tcase 'ps2':\n\t\t\tbuzzer = get_ps2_buzzer();\n\t\t\tbreak;\n\t\tcase 'websocket':\n\t\t\tbuzzer = get_websocket_buzzer(preferences.buzzer);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tconsole.log('error');\n\t}\n\n\tvar gameUI = new WebsocketUI(preferences.game.port)\n\tvar masterUI = new WebsocketUI(preferences.master.port)\n\tvar game = new Game(buzzer, gameUI, masterUI, preferences.game.questions_directory, startOrContinue)\n\treturn game;\n}\n\nfunction get_ps2_buzzer() {\n\tvar buzzer = null;\n\ttry {\n\t\tvar HID = require('node-hid');\n\t\tvar device = new HID.HID(0x054c, 0x1000);\n\t\tbuzzer = new Ps2Buzzer(device);\n\t} catch(e) {\n\t\tthrow new Error(\"No buzzer found : \"+e.message);\n\t}\n\treturn buzzer;\n}\n\nfunction get_teensy_buzzer() {\n\treturn new TeensyBuzzer();\n}\n\nfunction get_websocket_buzzer(prefs) {\n\treturn new WebsocketBuzzer(prefs.port);\n}"]}